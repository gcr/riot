<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text-html; charset=utf-8" /><title>riot: Distributed computing for the masses</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default" /><link rel="stylesheet" type="text/css" href="racket.css" title="default" /><link rel="stylesheet" type="text/css" href="scribble-style.css" title="default" /><script type="text/javascript" src="scribble-common.js"></script></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist" style="margin-bottom: 1em;"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="/" class="tocviewselflink" pltdoc="x"><span style="font-weight: bold">riot</span>:<span class="mywbr"> </span> Distributed computing for the masses</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="/#(part._.In_which_we_construct_a_networked_mapreduce_cluster_from_scratch_in_about_thirty_seconds)" class="tocviewlink" pltdoc="x">In which we construct a networked mapreduce cluster from scratch in
about thirty seconds</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="/#(part._.In_which_we_gain_significant_speedups_through_the_copious_application_of_spare_machinery)" class="tocviewlink" pltdoc="x">In which we gain significant speedups through the copious application of spare machinery</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="/#(part._.In_which_we_present_an_overview_and_clarity_is_achieved)" class="tocviewlink" pltdoc="x">In which we present an overview and clarity is achieved</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="/#(part._lowlevel)" class="tocviewlink" pltdoc="x">In which we present a lower-<wbr></wbr>level client API for communicating with the tracker</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="/#(part._.In_which_we_outline_licensing_and_copyrights)" class="tocviewlink" pltdoc="x">In which we outline licensing and copyrights</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#(part._.In_which_we_construct_a_networked_mapreduce_cluster_from_scratch_in_about_thirty_seconds)" class="tocsubseclink" pltdoc="x">In which we construct a networked mapreduce cluster from scratch in
about thirty seconds</a></td></tr><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="#(part._.In_which_we_gain_significant_speedups_through_the_copious_application_of_spare_machinery)" class="tocsubseclink" pltdoc="x">In which we gain significant speedups through the copious application of spare machinery</a></td></tr><tr><td><span class="tocsublinknumber">3<tt>&nbsp;</tt></span><a href="#(part._.In_which_we_present_an_overview_and_clarity_is_achieved)" class="tocsubseclink" pltdoc="x">In which we present an overview and clarity is achieved</a></td></tr><tr><td><span class="tocsublinknumber">3.1<tt>&nbsp;</tt></span><a href="#(part._.The_master_program)" class="tocsubseclink" pltdoc="x">The master program</a></td></tr><tr><td><span class="tocsublinknumber">3.2<tt>&nbsp;</tt></span><a href="#(part._.The_tracker)" class="tocsubseclink" pltdoc="x">The tracker</a></td></tr><tr><td><span class="tocsublinknumber">3.3<tt>&nbsp;</tt></span><a href="#(part._.The_workers)" class="tocsubseclink" pltdoc="x">The workers</a></td></tr><tr><td><span class="tocsublinknumber">3.4<tt>&nbsp;</tt></span><a href="#(part._restrictions)" class="tocsubseclink" pltdoc="x">In which we describe the peculiarities of for/<span class="mywbr"> </span>work and do-<wbr></wbr>work</a></td></tr><tr><td><a href="#(form._((planet._main..rkt._(gcr._riot..plt._1._0))._do-work))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: (planet gcr/riot:1:=0)"><span class="RktSym"><span class="RktStxLink">do-<wbr></wbr>work</span></span></span></a></td></tr><tr><td><a href="#(form._((planet._main..rkt._(gcr._riot..plt._1._0))._for/work))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: (planet gcr/riot:1:=0)"><span class="RktSym"><span class="RktStxLink">for/<span class="mywbr"> </span>work</span></span></span></a></td></tr><tr><td><span class="tocsublinknumber">3.5<tt>&nbsp;</tt></span><a href="#(part._problems)" class="tocsubseclink" pltdoc="x">In which, with a heavy heart, we outline restrictions and limitations of for/<span class="mywbr"> </span>work and do-<wbr></wbr>work</a></td></tr><tr><td><span class="tocsublinknumber">3.6<tt>&nbsp;</tt></span><a href="#(part._.In_which_we_describe_the_numerous_kinds_of_workunits_and_how_to_create_them)" class="tocsubseclink" pltdoc="x">In which we describe the numerous kinds of workunits and how to create them</a></td></tr><tr><td><a href="#(def._((planet._main..rkt._(gcr._riot..plt._1._0))._do-work/call))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: (planet gcr/riot:1:=0)"><span class="RktSym"><span class="RktValLink">do-<wbr></wbr>work/<span class="mywbr"> </span>call</span></span></span></a></td></tr><tr><td><a href="#(def._((planet._main..rkt._(gcr._riot..plt._1._0))._do-work/eval))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: (planet gcr/riot:1:=0)"><span class="RktSym"><span class="RktValLink">do-<wbr></wbr>work/<span class="mywbr"> </span>eval</span></span></span></a></td></tr><tr><td><a href="#(def._((planet._main..rkt._(gcr._riot..plt._1._0))._wait-until-done))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: (planet gcr/riot:1:=0)"><span class="RktSym"><span class="RktValLink">wait-<wbr></wbr>until-<wbr></wbr>done</span></span></span></a></td></tr><tr><td><a href="#(def._((planet._main..rkt._(gcr._riot..plt._1._0))._call-when-done))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: (planet gcr/riot:1:=0)"><span class="RktSym"><span class="RktValLink">call-<wbr></wbr>when-<wbr></wbr>done</span></span></span></a></td></tr><tr><td><a href="#(def._((planet._main..rkt._(gcr._riot..plt._1._0))._connect-to-riot-server!))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: (planet gcr/riot:1:=0)"><span class="RktSym"><span class="RktValLink">connect-<wbr></wbr>to-<wbr></wbr>riot-<wbr></wbr>server!</span></span></span></a></td></tr><tr><td><a href="#(def._((planet._main..rkt._(gcr._riot..plt._1._0))._current-client))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: (planet gcr/riot:1:=0)"><span class="RktSym"><span class="RktValLink">current-<wbr></wbr>client</span></span></span></a></td></tr><tr><td><span class="tocsublinknumber">4<tt>&nbsp;</tt></span><a href="#(part._lowlevel)" class="tocsubseclink" pltdoc="x">In which we present a lower-<wbr></wbr>level client API for communicating with the tracker</a></td></tr><tr><td><a href="#(def._((planet._client..rkt._(gcr._riot..plt._1._0))._client~3f))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: (planet gcr/riot:1:=0/client)"><span class="RktSym"><span class="RktValLink">client?</span></span></span></a></td></tr><tr><td><a href="#(def._((planet._client..rkt._(gcr._riot..plt._1._0))._connect-to-tracker))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: (planet gcr/riot:1:=0/client)"><span class="RktSym"><span class="RktValLink">connect-<wbr></wbr>to-<wbr></wbr>tracker</span></span></span></a></td></tr><tr><td><a href="#(def._((planet._client..rkt._(gcr._riot..plt._1._0))._client-who-am-i))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: (planet gcr/riot:1:=0/client)"><span class="RktSym"><span class="RktValLink">client-<wbr></wbr>who-<wbr></wbr>am-<wbr></wbr>i</span></span></span></a></td></tr><tr><td><a href="#(def._((planet._client..rkt._(gcr._riot..plt._1._0))._client-workunit-info))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: (planet gcr/riot:1:=0/client)"><span class="RktSym"><span class="RktValLink">client-<wbr></wbr>workunit-<wbr></wbr>info</span></span></span></a></td></tr><tr><td><a href="#(def._((planet._client..rkt._(gcr._riot..plt._1._0))._client-call-with-workunit-info))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: (planet gcr/riot:1:=0/client)"><span class="RktSym"><span class="RktValLink">client-<wbr></wbr>call-<wbr></wbr>with-<wbr></wbr>workunit-<wbr></wbr>info</span></span></span></a></td></tr><tr><td><a href="#(def._((planet._client..rkt._(gcr._riot..plt._1._0))._client-wait-for-work))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: (planet gcr/riot:1:=0/client)"><span class="RktSym"><span class="RktValLink">client-<wbr></wbr>wait-<wbr></wbr>for-<wbr></wbr>work</span></span></span></a></td></tr><tr><td><a href="#(def._((planet._client..rkt._(gcr._riot..plt._1._0))._client-call-with-work))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: (planet gcr/riot:1:=0/client)"><span class="RktSym"><span class="RktValLink">client-<wbr></wbr>call-<wbr></wbr>with-<wbr></wbr>work</span></span></span></a></td></tr><tr><td><a href="#(def._((planet._client..rkt._(gcr._riot..plt._1._0))._client-add-workunit))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: (planet gcr/riot:1:=0/client)"><span class="RktSym"><span class="RktValLink">client-<wbr></wbr>add-<wbr></wbr>workunit</span></span></span></a></td></tr><tr><td><a href="#(def._((planet._client..rkt._(gcr._riot..plt._1._0))._client-call-with-new-workunit))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: (planet gcr/riot:1:=0/client)"><span class="RktSym"><span class="RktValLink">client-<wbr></wbr>call-<wbr></wbr>with-<wbr></wbr>new-<wbr></wbr>workunit</span></span></span></a></td></tr><tr><td><a href="#(def._((planet._client..rkt._(gcr._riot..plt._1._0))._client-wait-for-finished-workunit))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: (planet gcr/riot:1:=0/client)"><span class="RktSym"><span class="RktValLink">client-<wbr></wbr>wait-<wbr></wbr>for-<wbr></wbr>finished-<wbr></wbr>workunit</span></span></span></a></td></tr><tr><td><a href="#(def._((planet._client..rkt._(gcr._riot..plt._1._0))._client-call-with-finished-workunit))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: (planet gcr/riot:1:=0/client)"><span class="RktSym"><span class="RktValLink">client-<wbr></wbr>call-<wbr></wbr>with-<wbr></wbr>finished-<wbr></wbr>workunit</span></span></span></a></td></tr><tr><td><a href="#(def._((planet._client..rkt._(gcr._riot..plt._1._0))._client-complete-workunit!))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: (planet gcr/riot:1:=0/client)"><span class="RktSym"><span class="RktValLink">client-<wbr></wbr>complete-<wbr></wbr>workunit!</span></span></span></a></td></tr><tr><td><span class="tocsublinknumber">5<tt>&nbsp;</tt></span><a href="#(part._.In_which_we_outline_licensing_and_copyrights)" class="tocsubseclink" pltdoc="x">In which we outline licensing and copyrights</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><h2><a name="(part._riot__.Distributed_computing_for_the_masses)"></a><span style="font-weight: bold">riot</span>: Distributed computing for the masses</h2><div class="SAuthorListBox"><span class="SAuthorList"><p class="author">gcr</p></span></div><p>Riot is a distributed computing system for Racket. With Riot, you can run
parallel tasks on multiple machines accross the network with minimal changes to
your code.</p><p>You need a Racket that supports submodules. At the time of writing, only the
<a href="http://pre.racket-lang.org/installers/">nightly builds</a> will work.</p><table cellspacing="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="/#(part._.In_which_we_construct_a_networked_mapreduce_cluster_from_scratch_in_about_thirty_seconds)" class="toptoclink" pltdoc="x">1<span class="hspace">&nbsp;</span>In which we construct a networked mapreduce cluster from scratch in
about thirty seconds</a></p></td></tr><tr><td><p><span class="hspace"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="/#(part._.In_which_we_gain_significant_speedups_through_the_copious_application_of_spare_machinery)" class="toptoclink" pltdoc="x">2<span class="hspace">&nbsp;</span>In which we gain significant speedups through the copious application of spare machinery</a></p></td></tr><tr><td><p><span class="hspace"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="/#(part._.In_which_we_present_an_overview_and_clarity_is_achieved)" class="toptoclink" pltdoc="x">3<span class="hspace">&nbsp;</span>In which we present an overview and clarity is achieved</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="/#(part._.The_master_program)" class="toclink" pltdoc="x">3.1<span class="hspace">&nbsp;</span>The master program</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="/#(part._.The_tracker)" class="toclink" pltdoc="x">3.2<span class="hspace">&nbsp;</span>The tracker</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="/#(part._.The_workers)" class="toclink" pltdoc="x">3.3<span class="hspace">&nbsp;</span>The workers</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="/#(part._restrictions)" class="toclink" pltdoc="x">3.4<span class="hspace">&nbsp;</span>In which we describe the peculiarities of for/work and do-work</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="/#(part._problems)" class="toclink" pltdoc="x">3.5<span class="hspace">&nbsp;</span>In which, with a heavy heart, we outline restrictions and limitations of for/work and do-work</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="/#(part._.In_which_we_describe_the_numerous_kinds_of_workunits_and_how_to_create_them)" class="toclink" pltdoc="x">3.6<span class="hspace">&nbsp;</span>In which we describe the numerous kinds of workunits and how to create them</a></p></td></tr><tr><td><p><span class="hspace"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="/#(part._lowlevel)" class="toptoclink" pltdoc="x">4<span class="hspace">&nbsp;</span>In which we present a lower-level client API for communicating with the tracker</a></p></td></tr><tr><td><p><span class="hspace"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="/#(part._.In_which_we_outline_licensing_and_copyrights)" class="toptoclink" pltdoc="x">5<span class="hspace">&nbsp;</span>In which we outline licensing and copyrights</a></p></td></tr></table><h3>1<tt>&nbsp;</tt><a name="(part._.In_which_we_construct_a_networked_mapreduce_cluster_from_scratch_in_about_thirty_seconds)"></a>In which we construct a networked mapreduce cluster from scratch in
about thirty seconds</h3><ol><li><p><div class="SIntrapara">To get started, first start the tracker server. In a terminal, run:
</div><div class="SIntrapara"><table cellspacing="0"><tr><td><p><span class="stt"><span class="stt">$ racket -p gcr/riot/server</span></span></p></td></tr></table></div></p></li><li><p><div class="SIntrapara">Parellel code looks like this:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktCmt">;;</span><span class="hspace">&nbsp;</span><span class="RktCmt">Save</span><span class="hspace">&nbsp;</span><span class="RktCmt">to</span><span class="hspace">&nbsp;</span><span class="RktCmt">simple-demo.rkt</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">#lang</span><span class="hspace">&nbsp;</span><span class="RktMeta">racket</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgcmVxdWlyZSkpKQ%3D%3D%0D%0A" class="RktStxLink" pltdoc="x">require</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgcGxhbmV0KSkp%0D%0A" class="RktStxLink" pltdoc="x">planet</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">gcr/riot</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgZGVmaW5lKSkp%0D%0A" class="RktStxLink" pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">run</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/#(form._((planet._main..rkt._(gcr._riot..plt._1._0))._for/work))" class="RktStxLink" pltdoc="x">for/work</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">i</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9wcml2YXRl%0D%0AL2Jhc2Uucmt0IikgYyBpbi1yYW5nZSkpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">in-range</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">10</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBz%0D%0AbGVlcCkpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">sleep</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">3</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktCmt">;</span><span class="hspace">&nbsp;</span><span class="RktCmt">or</span><span class="hspace">&nbsp;</span><span class="RktCmt">some</span><span class="hspace">&nbsp;</span><span class="RktCmt">big</span><span class="hspace">&nbsp;</span><span class="RktCmt">task</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyAq%0D%0AKSkp%0D%0A" class="RktValLink" pltdoc="x">*</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">10</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">i</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgbW9kdWxlKykpKQ%3D%3D%0D%0A" class="RktStxLink" pltdoc="x">module+</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">main</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/#(def._((planet._main..rkt._(gcr._riot..plt._1._0))._connect-to-riot-server!))" class="RktValLink" pltdoc="x">connect-to-riot-server!</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"localhost"</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9wcml2YXRl%0D%0AL21pc2Mucmt0IikgYyBkaXNwbGF5bG4pKSk%3D%0D%0A" class="RktValLink" pltdoc="x">displayln</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">run</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktCmt">;;</span><span class="hspace">&nbsp;</span><span class="RktCmt">Note</span><span class="hspace">&nbsp;</span><span class="RktCmt">that</span><span class="hspace">&nbsp;</span><span class="RktCmt">(run)</span><span class="hspace">&nbsp;</span><span class="RktCmt">must</span><span class="hspace">&nbsp;</span><span class="RktCmt">be</span><span class="hspace">&nbsp;</span><span class="RktCmt">in</span><span class="hspace">&nbsp;</span><span class="RktCmt">a</span><span class="hspace">&nbsp;</span><span class="RktCmt">separate</span><span class="hspace">&nbsp;</span><span class="RktCmt">function--see</span><span class="hspace">&nbsp;</span><span class="RktCmt">below</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9wcml2YXRl%0D%0AL21pc2Mucmt0IikgYyBkaXNwbGF5bG4pKSk%3D%0D%0A" class="RktValLink" pltdoc="x">displayln</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"Complete"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></div></p><p>You just wrote the &ldquo;master&rdquo; program that hands out work and processes the
results. The <span class="RktPn">(</span><span class="RktSym"><a href="/#(form._((planet._main..rkt._(gcr._riot..plt._1._0))._for/work))" class="RktStxLink" pltdoc="x">for/work</a></span><span class="stt"> </span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9zdHhjYXNlLXNjaGVtZS5ya3QiKSBjIC4uLikpKQ%3D%3D%0D%0A" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span> form acts just like <span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgZm9yL2xpc3QpKSk%3D%0D%0A" class="RktStxLink" pltdoc="x">for/list</a></span>, but
it runs in parallell: <span class="RktSym"><a href="/#(form._((planet._main..rkt._(gcr._riot..plt._1._0))._for/work))" class="RktStxLink" pltdoc="x">for/work</a></span> packages its body into &ldquo;workunits&rdquo;
that will be run by other worker processes. <span class="RktSym"><a href="/#(form._((planet._main..rkt._(gcr._riot..plt._1._0))._for/work))" class="RktStxLink" pltdoc="x">for/work</a></span> will generate one
workunit for each iteration. (Using <span class="RktSym"><a href="/#(form._((planet._main..rkt._(gcr._riot..plt._1._0))._for/work))" class="RktStxLink" pltdoc="x">for/work</a></span> is not the only way to
control riot and it has <a href="/#(part._restrictions)" pltdoc="x">restrictions and odd
behavior</a>, but it is the easiest.)</p><p><div class="SIntrapara">Go ahead and start your program:
</div><div class="SIntrapara"><table cellspacing="0"><tr><td><p><span class="stt"><span class="stt">$ racket simple-demo.rkt</span></span></p></td></tr></table></div></p><p>The loop runs 10 times, so your program will register 10 units of work with the
tracker. It will then appear to freeze because there aren&rsquo;t any workers to run
the work yet. Once we make some workers, the tracker will assign workunits to
them and will return results back to your program once the workers finish.
Workers can even run on other machines; in these cases, the tracker will simply
send workunits accross the network. There&rsquo;s no difference between local and
networked workers, so commandeer your entire computer lab if you like.</p></li><li><p>Let&rsquo;s start some worker processes. If you want your workers to run on
other machines, copy <span class="stt">simple-demo.rkt</span> there.</p><p><div class="SIntrapara">From the same directory that contains <span class="stt">simple-demo.rkt</span>, run
</div><div class="SIntrapara"><table cellspacing="0"><tr><td><p><span class="stt"><span class="stt">$ racket -p gcr/riot/worker -- localhost</span></span></p></td></tr></table></div></p><p>where <span class="stt">localhost</span> is the hostname of the tracker server you ran earlier.
Once you start a worker, it will immediately start to process workunits. Once
all workunits are finished, the master program will un-freeze and the
<span class="RktSym"><a href="/#(form._((planet._main..rkt._(gcr._riot..plt._1._0))._for/work))" class="RktStxLink" pltdoc="x">for/work</a></span> form will return the results of each workunit to the caller.</p><p>Add as many workers as you like. The more workers you run, the faster your
program goes. If you kill a worker with Ctrl+C or subject it to some other
horrible fate, the tracker server should notice and will reassign abandoned
workunits to other workers.</p><p>If one of the workers throws an exception, the tracker will forward the
exception to <span class="RktSym"><a href="/#(form._((planet._main..rkt._(gcr._riot..plt._1._0))._for/work))" class="RktStxLink" pltdoc="x">for/work</a></span>, which will in turn will throw an exception with
a message about which worker caused the problem. Don&rsquo;t worry &#8212;<wbr></wbr> the tracker
remembers completed workunits after your program exits, so if you run your
program again, it will pick up where it left off.</p><p>If you change your program, be sure to copy the new version to all of the
workers and restart them all too. If you don&rsquo;t, they might complain (throw
exceptions) if you&rsquo;re lucky, or they just might give results generated from the
older code if you&rsquo;re unlucky. </p></li></ol><h3>2<tt>&nbsp;</tt><a name="(part._.In_which_we_gain_significant_speedups_through_the_copious_application_of_spare_machinery)"></a>In which we gain significant speedups through the copious application of spare machinery</h3><p>Here&rsquo;s a slightly more complicated example. Here, we find all compound
dictionary words: words in <span class="stt">/usr/share/dict/words</span> that are made by
concatenating two other dictionary words.</p><p>Here&rsquo;s some simple code to do that:</p><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktMeta">#lang</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgbW9kLXBhdGggYyAicmFja2V0Iikp%0D%0A" class="RktModLink" pltdoc="x"><span class="RktSym">racket</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktCmt">;;</span><span class="hspace">&nbsp;</span><span class="RktCmt">dict.rkt</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgcmVxdWlyZSkpKQ%3D%3D%0D%0A" class="RktStxLink" pltdoc="x">require</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgcGxhbmV0KSkp%0D%0A" class="RktStxLink" pltdoc="x">planet</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">gcr/riot</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgZGVmaW5lKSkp%0D%0A" class="RktStxLink" pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">dictionary</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktCmt">;;</span><span class="hspace">&nbsp;</span><span class="RktCmt">List</span><span class="hspace">&nbsp;</span><span class="RktCmt">of</span><span class="hspace">&nbsp;</span><span class="RktCmt">words</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvc2V0LnJr%0D%0AdCIpIGMgZm9yL3NldCkpKQ%3D%3D%0D%0A" class="RktStxLink" pltdoc="x">for/set</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">word</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9wcml2YXRl%0D%0AL2Jhc2Uucmt0IikgYyBpbi1saXN0KSkp%0D%0A" class="RktValLink" pltdoc="x">in-list</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9maWxlLnJr%0D%0AdCIpIGMgZmlsZS0%2BbGluZXMpKSk%3D%0D%0A" class="RktValLink" pltdoc="x">file-&gt;lines</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"/usr/share/dict/words"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:when</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyA%2B%0D%0APSkpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">&gt;=</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBz%0D%0AdHJpbmctbGVuZ3RoKSkp%0D%0A" class="RktValLink" pltdoc="x">string-length</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">word</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">3</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">word</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgZGVmaW5lKSkp%0D%0A" class="RktStxLink" pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">word-combinations</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9wcml2YXRl%0D%0AL2Jhc2Uucmt0IikgYyBhcHBseSkpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">apply</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBh%0D%0AcHBlbmQpKSk%3D%0D%0A" class="RktValLink" pltdoc="x">append</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktCmt">;</span><span class="hspace">&nbsp;</span><span class="RktCmt">This</span><span class="hspace">&nbsp;</span><span class="RktCmt">flattens</span><span class="hspace">&nbsp;</span><span class="RktCmt">the</span><span class="hspace">&nbsp;</span><span class="RktCmt">list</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgZm9yL2xpc3QpKSk%3D%0D%0A" class="RktStxLink" pltdoc="x">for/list</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">first-word</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9zZXQucmt0%0D%0AIikgYyBpbi1zZXQpKSk%3D%0D%0A" class="RktValLink" pltdoc="x">in-set</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">dictionary</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgZm9yL2xpc3QpKSk%3D%0D%0A" class="RktStxLink" pltdoc="x">for/list</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">second-word</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9zZXQucmt0%0D%0AIikgYyBpbi1zZXQpKSk%3D%0D%0A" class="RktValLink" pltdoc="x">in-set</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">dictionary</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:when</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9zZXQucmt0%0D%0AIikgYyBzZXQtbWVtYmVyPykpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">set-member?</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">dictionary</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBz%0D%0AdHJpbmctYXBwZW5kKSkp%0D%0A" class="RktValLink" pltdoc="x">string-append</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">first-word</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">second-word</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBj%0D%0Ab25zKSkp%0D%0A" class="RktValLink" pltdoc="x">cons</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">first-word</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">second-word</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgbW9kdWxlKykpKQ%3D%3D%0D%0A" class="RktStxLink" pltdoc="x">module+</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">main</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgZGVmaW5lKSkp%0D%0A" class="RktStxLink" pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">words</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9tb3JlLXNjaGVtZS5ya3QiKSBjIHRpbWUpKSk%3D%0D%0A" class="RktStxLink" pltdoc="x">time</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">word-combinations</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBw%0D%0AcmludGYpKSk%3D%0D%0A" class="RktValLink" pltdoc="x">printf</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"There</span><span class="hspace">&nbsp;</span><span class="RktVal">are</span><span class="hspace">&nbsp;</span><span class="RktVal">~a</span><span class="hspace">&nbsp;</span><span class="RktVal">words.\n"</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBs%0D%0AZW5ndGgpKSk%3D%0D%0A" class="RktValLink" pltdoc="x">length</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">words</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktCmt">;;</span><span class="hspace">&nbsp;</span><span class="RktCmt">Print</span><span class="hspace">&nbsp;</span><span class="RktCmt">a</span><span class="hspace">&nbsp;</span><span class="RktCmt">random</span><span class="hspace">&nbsp;</span><span class="RktCmt">subset</span><span class="hspace">&nbsp;</span><span class="RktCmt">of</span><span class="hspace">&nbsp;</span><span class="RktCmt">the</span><span class="hspace">&nbsp;</span><span class="RktCmt">results.</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyB3%0D%0Acml0ZSkpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">write</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9saXN0LnJr%0D%0AdCIpIGMgdGFrZSkpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">take</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9saXN0LnJr%0D%0AdCIpIGMgc2h1ZmZsZSkpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">shuffle</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">words</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">20</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBu%0D%0AZXdsaW5lKSkp%0D%0A" class="RktValLink" pltdoc="x">newline</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote><p><div class="SIntrapara">There are definitely better ways to do this. We naively loop through the entire
dictionary for each dictionary word and see if the concatenation is also part
of the dictionary. There are two ways of making this faster: we can use a
smarter algorithm and more complicated data structures (also known as &ldquo;the
right way&rdquo;), or we can just throw more hardware at the problem (also known as
&ldquo;the fun way&rdquo;). As written, this code is an ideal candidate for
parallelization because: </div><div class="SIntrapara"><ul><li><p>We can split up the outer loop of this
dictionary search into parts </p></li><li><p>Each iteration of the outer loop doesn&rsquo;t
depend on any other iteration; each is <span style="font-style: italic">self-contained</span></p></li><li><p>There
isn&rsquo;t very much processing to do after we have the final word list</p></li></ul></div></p><p><div class="SIntrapara">Running this on an Intel Xeon 1.86GHz CPU produced this output:
</div><div class="SIntrapara"><table cellspacing="0"><tr><td><p><span class="stt"><span class="stt">cpu time: 11233134 real time: 11231587 gc time: 103748</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">There are 17658 words.</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">(("for" . "going") ("tail" . "gating") ("minima" . "list's") ("wise" . "acres") ("mill" . "stone's") ("hare" . "brained") ("under" . "bids") ("Chi" . "lean") ("clod" . "hopper") ("reap" . "points") ("dis" . "missal's") ("scholars" . "hip's") ("over" . "load") ("kilo" . "watts") ("trash" . "cans") ("snaps" . "hot") ("lattice" . "work") ("mast" . "head") ("over" . "coming") ("whole" . "sales"))</span></span></p></td></tr></table></div><div class="SIntrapara">The above code took 187.2 minutes.</div></p><p><div class="SIntrapara">To parallelize this code, we must make three changes:
</div><div class="SIntrapara"><ul><li><p>Change the outer <span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgZm9yL2xpc3QpKSk%3D%0D%0A" class="RktStxLink" pltdoc="x">for/list</a></span> form to a
<span class="RktSym"><a href="/#(form._((planet._main..rkt._(gcr._riot..plt._1._0))._for/work))" class="RktStxLink" pltdoc="x">for/work</a></span> form</p></li><li><p>Add a <span class="RktPn">(</span><span class="RktSym"><a href="/#(def._((planet._main..rkt._(gcr._riot..plt._1._0))._connect-to-riot-server!))" class="RktValLink" pltdoc="x">connect-to-riot-server!</a></span><span class="RktPn">)</span> call in the main submodule</p></li><li><p>Start workers. For this example, I ran twenty total workers on four spare lab machines and started the tracker server on <span class="RktVal">"alfred"</span></p></li></ul></div></p><p><div class="SIntrapara">The new code looks like this:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktMeta">#lang</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgbW9kLXBhdGggYyAicmFja2V0Iikp%0D%0A" class="RktModLink" pltdoc="x"><span class="RktSym">racket</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktCmt">;;</span><span class="hspace">&nbsp;</span><span class="RktCmt">dict.rkt</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgcmVxdWlyZSkpKQ%3D%3D%0D%0A" class="RktStxLink" pltdoc="x">require</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgcGxhbmV0KSkp%0D%0A" class="RktStxLink" pltdoc="x">planet</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">gcr/riot</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgZGVmaW5lKSkp%0D%0A" class="RktStxLink" pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">dictionary</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktCmt">;;</span><span class="hspace">&nbsp;</span><span class="RktCmt">List</span><span class="hspace">&nbsp;</span><span class="RktCmt">of</span><span class="hspace">&nbsp;</span><span class="RktCmt">words</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvc2V0LnJr%0D%0AdCIpIGMgZm9yL3NldCkpKQ%3D%3D%0D%0A" class="RktStxLink" pltdoc="x">for/set</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">word</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9wcml2YXRl%0D%0AL2Jhc2Uucmt0IikgYyBpbi1saXN0KSkp%0D%0A" class="RktValLink" pltdoc="x">in-list</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9maWxlLnJr%0D%0AdCIpIGMgZmlsZS0%2BbGluZXMpKSk%3D%0D%0A" class="RktValLink" pltdoc="x">file-&gt;lines</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"/usr/share/dict/words"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:when</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyA%2B%0D%0APSkpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">&gt;=</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBz%0D%0AdHJpbmctbGVuZ3RoKSkp%0D%0A" class="RktValLink" pltdoc="x">string-length</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">word</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">3</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">word</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgZGVmaW5lKSkp%0D%0A" class="RktStxLink" pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">word-combinations</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9wcml2YXRl%0D%0AL2Jhc2Uucmt0IikgYyBhcHBseSkpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">apply</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBh%0D%0AcHBlbmQpKSk%3D%0D%0A" class="RktValLink" pltdoc="x">append</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktCmt">;</span><span class="hspace">&nbsp;</span><span class="RktCmt">This</span><span class="hspace">&nbsp;</span><span class="RktCmt">flattens</span><span class="hspace">&nbsp;</span><span class="RktCmt">the</span><span class="hspace">&nbsp;</span><span class="RktCmt">list</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/#(form._((planet._main..rkt._(gcr._riot..plt._1._0))._for/work))" class="RktStxLink" pltdoc="x">for/work</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">first-word</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9zZXQucmt0%0D%0AIikgYyBpbi1zZXQpKSk%3D%0D%0A" class="RktValLink" pltdoc="x">in-set</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">dictionary</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgZm9yL2xpc3QpKSk%3D%0D%0A" class="RktStxLink" pltdoc="x">for/list</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">second-word</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9zZXQucmt0%0D%0AIikgYyBpbi1zZXQpKSk%3D%0D%0A" class="RktValLink" pltdoc="x">in-set</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">dictionary</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:when</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9zZXQucmt0%0D%0AIikgYyBzZXQtbWVtYmVyPykpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">set-member?</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">dictionary</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBz%0D%0AdHJpbmctYXBwZW5kKSkp%0D%0A" class="RktValLink" pltdoc="x">string-append</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">first-word</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">second-word</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBj%0D%0Ab25zKSkp%0D%0A" class="RktValLink" pltdoc="x">cons</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">first-word</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">second-word</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgbW9kdWxlKykpKQ%3D%3D%0D%0A" class="RktStxLink" pltdoc="x">module+</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">main</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/#(def._((planet._main..rkt._(gcr._riot..plt._1._0))._connect-to-riot-server!))" class="RktValLink" pltdoc="x">connect-to-riot-server!</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"alfred"</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgZGVmaW5lKSkp%0D%0A" class="RktStxLink" pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">words</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9tb3JlLXNjaGVtZS5ya3QiKSBjIHRpbWUpKSk%3D%0D%0A" class="RktStxLink" pltdoc="x">time</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">word-combinations</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBw%0D%0AcmludGYpKSk%3D%0D%0A" class="RktValLink" pltdoc="x">printf</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"There</span><span class="hspace">&nbsp;</span><span class="RktVal">are</span><span class="hspace">&nbsp;</span><span class="RktVal">~a</span><span class="hspace">&nbsp;</span><span class="RktVal">words.\n"</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBs%0D%0AZW5ndGgpKSk%3D%0D%0A" class="RktValLink" pltdoc="x">length</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">words</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktCmt">;;</span><span class="hspace">&nbsp;</span><span class="RktCmt">Print</span><span class="hspace">&nbsp;</span><span class="RktCmt">a</span><span class="hspace">&nbsp;</span><span class="RktCmt">random</span><span class="hspace">&nbsp;</span><span class="RktCmt">subset</span><span class="hspace">&nbsp;</span><span class="RktCmt">of</span><span class="hspace">&nbsp;</span><span class="RktCmt">the</span><span class="hspace">&nbsp;</span><span class="RktCmt">results.</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyB3%0D%0Acml0ZSkpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">write</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9saXN0LnJr%0D%0AdCIpIGMgdGFrZSkpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">take</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9saXN0LnJr%0D%0AdCIpIGMgc2h1ZmZsZSkpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">shuffle</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">words</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">20</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBu%0D%0AZXdsaW5lKSkp%0D%0A" class="RktValLink" pltdoc="x">newline</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></div></p><p><div class="SIntrapara">This program generates this output:
</div><div class="SIntrapara"><table cellspacing="0"><tr><td><p><span class="stt"><span class="stt">$ ~/racket/bin/racket dict.rkt</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">cpu time: 51903 real time: 1121990 gc time: 1732</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">There are 17658 words.</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">(("nick" . "name's") ("head" . "lights") ("ran" . "sacks") ("disc" . "lose") ("build" . "ups") ("wind" . "breaks") ("hot" . "headed") ("god" . "parent") ("main" . "frame") ("fiddle" . "sticks") ("pro" . "verbs") ("Volta" . "ire") ("select" . "ions") ("trail" . "blazer") ("bat" . "ten's") ("sniff" . "led") ("over" . "joys") ("down" . "hill") ("panel" . "led") ("tempera" . "ting"))</span></span></p></td></tr></table></div></p><p>This version took 18.7 minutes, which is about a factor of 10 improvement. Our
cluster completed about 100 workunits (outer loop iterations) per second. To
make this more efficient, we would want to find some way of splitting the work
up into larger and less workunits to lower the tracker&rsquo;s network overhead.</p><p><div class="SIntrapara">The tracker caches workunits in memory. Running the program a second time...
</div><div class="SIntrapara"><table cellspacing="0"><tr><td><p><span class="stt"><span class="stt">$ ~/racket/bin/racket dict.rkt</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">cpu time: 30133 real time: 63214 gc time: 772</span></span></p></td></tr></table></div><div class="SIntrapara">...takes 63 seconds because the tracker remembered the ~100,000 completed
workunits. The program now spent all of its time in network traffic and
appending/shuffling the huge list of results.</div></p><h3>3<tt>&nbsp;</tt><a name="(part._.In_which_we_present_an_overview_and_clarity_is_achieved)"></a><a name="(mod-path._(planet._gcr/riot~3a1~3a~3d0))"></a>In which we present an overview and clarity is achieved</h3><p><div class="SIntrapara"><table cellspacing="0" class="defmodule"><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgcmVxdWlyZSkpKQ%3D%3D%0D%0A" class="RktStxLink" pltdoc="x">require</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgcGxhbmV0KSkp%0D%0A" class="RktStxLink" pltdoc="x">planet</a></span><span class="stt"> </span><span class="RktSym">gcr/riot:1:=0</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara"><p><div class="SIntrapara">Riot clusters consist of three parts:
</div><div class="SIntrapara"><ul><li><p>A <span style="font-weight: bold">master program</span></p></li><li><p>A <span style="font-weight: bold">tracker</span> server</p></li><li><p>One or more <span style="font-weight: bold">worker processeses</span></p></li></ul></div></p></div></p><h4>3.1<tt>&nbsp;</tt><a name="(part._.The_master_program)"></a>The master program</h4><p>The master program sends workunits to the tracker and waits for the tracker to
send results back. To do this, the master program uses <span class="RktSym"><a href="/#(form._((planet._main..rkt._(gcr._riot..plt._1._0))._for/work))" class="RktStxLink" pltdoc="x">for/work</a></span>, which
sends units of work to the tracker and returns the results. The program can
also use <span class="RktSym"><a href="/#(form._((planet._main..rkt._(gcr._riot..plt._1._0))._do-work))" class="RktStxLink" pltdoc="x">do-work</a></span>, <span class="RktSym"><a href="/#(def._((planet._main..rkt._(gcr._riot..plt._1._0))._do-work/call))" class="RktValLink" pltdoc="x">do-work/call</a></span>, and <span class="RktSym"><a href="/#(def._((planet._main..rkt._(gcr._riot..plt._1._0))._do-work/eval))" class="RktValLink" pltdoc="x">do-work/eval</a></span>
forms for lower-level control.</p><h4>3.2<tt>&nbsp;</tt><a name="(part._.The_tracker)"></a><a name="(mod-path._(planet._gcr/riot~3a1~3a~3d0/server))"></a>The tracker</h4><p><div class="SIntrapara"><table cellspacing="0" class="defmodule"><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgcmVxdWlyZSkpKQ%3D%3D%0D%0A" class="RktStxLink" pltdoc="x">require</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgcGxhbmV0KSkp%0D%0A" class="RktStxLink" pltdoc="x">planet</a></span><span class="stt"> </span><span class="RktSym">gcr/riot:1:=0/server</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara">The tracker server&rsquo;s only job is to accept workunits from master programs,
assign them to workers, and return worker results back to the master program.
It&rsquo;s essentially nothing more than a database of workunits. You can query that
database using the functions described in the <a href="/#(part._lowlevel)" pltdoc="x">low-level
client API section</a>.</div></p><p><div class="SIntrapara">To start your own tracker server, run:
</div><div class="SIntrapara"><table cellspacing="0"><tr><td><p><span class="stt"><span class="stt">$ racket -p gcr/riot/server</span></span></p></td></tr></table></div><div class="SIntrapara">The server can also run on a different port, like this:
</div><div class="SIntrapara"><table cellspacing="0"><tr><td><p><span class="stt"><span class="stt">$ racket -p gcr/riot/server -- --port 12345</span></span></p></td></tr></table></div><div class="SIntrapara">The double dash separates racket&rsquo;s commandline arguments from the tracker
server&rsquo;s arguments.</div></p><h4>3.3<tt>&nbsp;</tt><a name="(part._.The_workers)"></a><a name="(mod-path._(planet._gcr/riot~3a1~3a~3d0/worker))"></a>The workers</h4><p><div class="SIntrapara"><table cellspacing="0" class="defmodule"><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgcmVxdWlyZSkpKQ%3D%3D%0D%0A" class="RktStxLink" pltdoc="x">require</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgcGxhbmV0KSkp%0D%0A" class="RktStxLink" pltdoc="x">planet</a></span><span class="stt"> </span><span class="RktSym">gcr/riot:1:=0/worker</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara"><p><div class="SIntrapara">Workers are processes that turn workunits into results. You can start a worker by
running:
</div><div class="SIntrapara"><table cellspacing="0"><tr><td><p><span class="stt"><span class="stt">racket -p gcr/riot/worker -- server-host</span></span></p></td></tr></table></div><div class="SIntrapara">or, more fancy:
</div><div class="SIntrapara"><table cellspacing="0"><tr><td><p><span class="stt"><span class="stt">racket -p gcr/riot/worker -- --port 1234 --name worker-name server-host</span></span></p></td></tr></table></div><div class="SIntrapara">where <span class="stt"></span><span class="stt">&ndash;</span><span class="stt">port</span> and <span class="stt"></span><span class="stt">&ndash;</span><span class="stt">name</span> are optional.</div></p></div><div class="SIntrapara">Each worker has a &ldquo;client name&rdquo; that identifies itself. This defaults to the
machine&rsquo;s hostname followed by a dash and a random string of letters that
uniquely identify multiple workers on that client. To change the first part of
the client name, use the <span class="stt"></span><span class="stt">&ndash;</span><span class="stt">name</span> switch.</div><div class="SIntrapara"><p><div class="SIntrapara">In workunits created by the <span class="RktSym"><a href="/#(form._((planet._main..rkt._(gcr._riot..plt._1._0))._for/work))" class="RktStxLink" pltdoc="x">for/work</a></span> and <span class="RktSym"><a href="/#(form._((planet._main..rkt._(gcr._riot..plt._1._0))._do-work))" class="RktStxLink" pltdoc="x">do-work</a></span> forms, each
worker will <span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgcmVxdWlyZSkpKQ%3D%3D%0D%0A" class="RktStxLink" pltdoc="x">require</a></span> the module that contains that form. In the case of
<span class="RktSym"><a href="/#(def._((planet._main..rkt._(gcr._riot..plt._1._0))._do-work/call))" class="RktValLink" pltdoc="x">do-work/call</a></span> workunits, the worker will <span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgcmVxdWlyZSkpKQ%3D%3D%0D%0A" class="RktStxLink" pltdoc="x">require</a></span> the module
named by the <span class="RktSym"><a href="/#(def._((planet._main..rkt._(gcr._riot..plt._1._0))._do-work/call))" class="RktValLink" pltdoc="x">do-work/call</a></span> form. To be sure that the worker can find
the module, you must run the worker in the same directory that you ran the
master program relative to the module. For example, if you ran: </div><div class="SIntrapara"><table cellspacing="0"><tr><td><p><span class="stt"><span class="hspace">&nbsp;</span><span class="stt">$ cd</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">/tmp/demo; racket simple-demo.rkt </span></span></p></td></tr></table></div><div class="SIntrapara"> on the master and copied
<span class="stt">simple-demo.rkt</span> to <span class="stt">/home/worker/demo/simple-demo.rkt</span> on the
worker, you must run the worker like this: </div><div class="SIntrapara"><table cellspacing="0"><tr><td><p><span class="stt"><span class="hspace">&nbsp;</span><span class="stt">$ cd /home/worker/demo;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">racket -p gcr/riot/worker -- tracker-server </span></span></p></td></tr></table></div></p></div><div class="SIntrapara">This also means that each worker must have identical copies of
<span class="stt">simple-demo.rkt</span>. If the body of a worker&rsquo;s <span class="RktSym"><a href="/#(form._((planet._main..rkt._(gcr._riot..plt._1._0))._for/work))" class="RktStxLink" pltdoc="x">for/work</a></span> form does not
exactly match the master&rsquo;s <span class="RktSym"><a href="/#(form._((planet._main..rkt._(gcr._riot..plt._1._0))._for/work))" class="RktStxLink" pltdoc="x">for/work</a></span> form, it will complain about a
code mismatch. The <span class="RktSym"><a href="/#(form._((planet._main..rkt._(gcr._riot..plt._1._0))._for/work))" class="RktStxLink" pltdoc="x">for/work</a></span> and <span class="RktSym"><a href="/#(form._((planet._main..rkt._(gcr._riot..plt._1._0))._do-work))" class="RktStxLink" pltdoc="x">do-work</a></span> forms check for this,
but <span class="RktSym"><a href="/#(def._((planet._main..rkt._(gcr._riot..plt._1._0))._do-work/call))" class="RktValLink" pltdoc="x">do-work/call</a></span> cannot check the version of the module it requires,
so workers with differing versions of those modules will silently misbehave.</div><div class="SIntrapara">A worker shouldn&rsquo;t generate its own workunits. This means you musn&rsquo;t use
<span class="RktSym"><a href="/#(form._((planet._main..rkt._(gcr._riot..plt._1._0))._for/work))" class="RktStxLink" pltdoc="x">for/work</a></span> or <span class="RktSym"><a href="/#(form._((planet._main..rkt._(gcr._riot..plt._1._0))._do-work))" class="RktStxLink" pltdoc="x">do-work</a></span> forms in the top level of a module (or in
any function that runs when the module is required) or else your workers will
attempt to generate workunits of their own. See the
<a href="/#(part._problems)" pltdoc="x">for/work section</a> for more details.</div></p><h4>3.4<tt>&nbsp;</tt><a name="(part._restrictions)"></a>In which we describe the peculiarities of for/work and do-work</h4><p><div class="SIntrapara">The two easiest ways of submitting workunits are <span class="RktSym"><a href="/#(form._((planet._main..rkt._(gcr._riot..plt._1._0))._do-work))" class="RktStxLink" pltdoc="x">do-work</a></span> and
<span class="RktSym"><a href="/#(form._((planet._main..rkt._(gcr._riot..plt._1._0))._for/work))" class="RktStxLink" pltdoc="x">for/work</a></span>.
</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(form._((planet._main..rkt._(gcr._riot..plt._1._0))._do-work))"></a><span title="Provided from: (planet gcr/riot:1:=0)"><span class="RktSym"><a href="/#(form._((planet._main..rkt._(gcr._riot..plt._1._0))._do-work))" class="RktStxLink" pltdoc="x">do-work</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">body</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Packages up the <span class="RktVar">body</span><span class="stt"> </span><span class="RktMeta"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9zdHhjYXNlLXNjaGVtZS5ya3QiKSBjIC4uLikpKQ%3D%3D%0D%0A" class="RktStxLink" pltdoc="x">...</a></span> expressions to be evaluated in a workunit.
This form returns instantly (after one round-trip to the tracker) and returns a
workunit ID, a string representing a promise to do the work.
Pass this value to <span class="RktSym"><a href="/#(def._((planet._main..rkt._(gcr._riot..plt._1._0))._wait-until-done))" class="RktValLink" pltdoc="x">wait-until-done</a></span> to retrieve the result of the
<span class="RktSym"><a href="/#(form._((planet._main..rkt._(gcr._riot..plt._1._0))._do-work))" class="RktStxLink" pltdoc="x">do-work</a></span> form.
</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(form._((planet._main..rkt._(gcr._riot..plt._1._0))._for/work))"></a><span title="Provided from: (planet gcr/riot:1:=0)"><span class="RktSym"><a href="/#(form._((planet._main..rkt._(gcr._riot..plt._1._0))._for/work))" class="RktStxLink" pltdoc="x">for/work</a></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">for-clause</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVar">body</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Acts just like <span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgZm9yL2xpc3QpKSk%3D%0D%0A" class="RktStxLink" pltdoc="x">for/list</a></span>, but arranges for each <span class="RktVar">body</span><span class="stt"> </span><span class="RktMeta"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9zdHhjYXNlLXNjaGVtZS5ya3QiKSBjIC4uLikpKQ%3D%3D%0D%0A" class="RktStxLink" pltdoc="x">...</a></span> to
run in parallell: each iteration creates a workunit using <span class="RktSym"><a href="/#(form._((planet._main..rkt._(gcr._riot..plt._1._0))._do-work))" class="RktStxLink" pltdoc="x">do-work</a></span>;
then calls <span class="RktSym"><a href="/#(def._((planet._main..rkt._(gcr._riot..plt._1._0))._wait-until-done))" class="RktValLink" pltdoc="x">wait-until-done</a></span> on the resulting workunit.</div></p><p><div class="SIntrapara">This is essentially equivalent to:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9sZXRzdHgtc2NoZW1lLnJrdCIpIGMgbGV0KSkp%0D%0A" class="RktStxLink" pltdoc="x">let</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">workunits</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgZm9yL2xpc3QpKSk%3D%0D%0A" class="RktStxLink" pltdoc="x">for/list</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">for-clause</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9zdHhjYXNlLXNjaGVtZS5ya3QiKSBjIC4uLikpKQ%3D%3D%0D%0A" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/#(form._((planet._main..rkt._(gcr._riot..plt._1._0))._do-work))" class="RktStxLink" pltdoc="x">do-work</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">body</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9zdHhjYXNlLXNjaGVtZS5ya3QiKSBjIC4uLikpKQ%3D%3D%0D%0A" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgZm9yL2xpc3QpKSk%3D%0D%0A" class="RktStxLink" pltdoc="x">for/list</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">p</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">workunits</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/#(def._((planet._main..rkt._(gcr._riot..plt._1._0))._wait-until-done))" class="RktValLink" pltdoc="x">wait-until-done</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">p</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></div></p><p><div class="SIntrapara">For <span class="RktSym"><a href="/#(form._((planet._main..rkt._(gcr._riot..plt._1._0))._for/work))" class="RktStxLink" pltdoc="x">for/work</a></span> and <span class="RktSym"><a href="/#(form._((planet._main..rkt._(gcr._riot..plt._1._0))._do-work))" class="RktStxLink" pltdoc="x">do-work</a></span>,
any expressions can appear in the <span class="RktSym">body</span><span class="stt"> </span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9zdHhjYXNlLXNjaGVtZS5ya3QiKSBjIC4uLikpKQ%3D%3D%0D%0A" class="RktStxLink" pltdoc="x">...</a></span> form as long as they:
</div><div class="SIntrapara"><ul><li><p><span style="font-weight: bold">...only refer to <span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9wcml2YXRl%0D%0AL3NlcmlhbGl6ZS5ya3QiKSBjIHNlcmlhbGl6YWJsZT8pKSk%3D%0D%0A" class="RktValLink" pltdoc="x">serializable?</a></span> values</span>. If a free variable
is unserializable, the workunit cannot be packaged up for transmission accross
the network to workers.</p></li><li><p>...do not cause and do not depend on <span style="font-weight: bold">global
side effects</span>. Otherwise, each worker may have different state, causing
unpredictable behavior. </p></li></ul></div></p><p>The <span class="RktSym"><a href="/#(form._((planet._main..rkt._(gcr._riot..plt._1._0))._do-work))" class="RktStxLink" pltdoc="x">do-work</a></span> form works by wrapping all of the <span class="RktSym">body</span><span class="stt"> </span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9zdHhjYXNlLXNjaGVtZS5ya3QiKSBjIC4uLikpKQ%3D%3D%0D%0A" class="RktStxLink" pltdoc="x">...</a></span>
expressions inside a <span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJ3ZWItc2VydmVyL2xh%0D%0Abmcvc2VyaWFsLWxhbWJkYS5ya3QiKSBjIHNlcmlhbC1sYW1iZGEpKSk%3D%0D%0A" class="RktStxLink" pltdoc="x">serial-lambda</a></span> with no arguments. This effectively
makes each workunit its own closure. Free variables are <span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9wcml2YXRl%0D%0AL3NlcmlhbGl6ZS5ya3QiKSBjIHNlcmlhbGl6ZSkpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">serialize</a></span>d
when the workunit is sent to the tracker, and the resulting value is serialized
on the return trip.</p><p>Workunits created by <span class="RktSym"><a href="/#(form._((planet._main..rkt._(gcr._riot..plt._1._0))._do-work))" class="RktStxLink" pltdoc="x">do-work</a></span> (and, by extension, <span class="RktSym"><a href="/#(form._((planet._main..rkt._(gcr._riot..plt._1._0))._for/work))" class="RktStxLink" pltdoc="x">for/work</a></span>)
can refer to free variables, like this:</p><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktMeta">#lang</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgbW9kLXBhdGggYyAicmFja2V0Iikp%0D%0A" class="RktModLink" pltdoc="x"><span class="RktSym">racket</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgcmVxdWlyZSkpKQ%3D%3D%0D%0A" class="RktStxLink" pltdoc="x">require</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgcGxhbmV0KSkp%0D%0A" class="RktStxLink" pltdoc="x">planet</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">gcr/riot</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgZGVmaW5lKSkp%0D%0A" class="RktStxLink" pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">run</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgZGVmaW5lKSkp%0D%0A" class="RktStxLink" pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">master-random-number</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBy%0D%0Ab3VuZCkpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">round</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyAq%0D%0AKSkp%0D%0A" class="RktValLink" pltdoc="x">*</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">100</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBy%0D%0AYW5kb20pKSk%3D%0D%0A" class="RktValLink" pltdoc="x">random</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgZGVmaW5lKSkp%0D%0A" class="RktStxLink" pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">running-workunits</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgZm9yL2xpc3QpKSk%3D%0D%0A" class="RktStxLink" pltdoc="x">for/list</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">x</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9wcml2YXRl%0D%0AL2Jhc2Uucmt0IikgYyBpbi1yYW5nZSkpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">in-range</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">10</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/#(form._((planet._main..rkt._(gcr._riot..plt._1._0))._do-work))" class="RktStxLink" pltdoc="x">do-work</a></span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBm%0D%0Ab3JtYXQpKSk%3D%0D%0A" class="RktValLink" pltdoc="x">format</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"Workunit</span><span class="hspace">&nbsp;</span><span class="RktVal">#~a:</span><span class="hspace">&nbsp;</span><span class="RktVal">Master</span><span class="hspace">&nbsp;</span><span class="RktVal">chose</span><span class="hspace">&nbsp;</span><span class="RktVal">~a,</span><span class="hspace">&nbsp;</span><span class="RktVal">but</span><span class="hspace">&nbsp;</span><span class="RktVal">we</span><span class="hspace">&nbsp;</span><span class="RktVal">choose</span><span class="hspace">&nbsp;</span><span class="RktVal">~a."</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">x</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">master-random-number</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBy%0D%0Ab3VuZCkpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">round</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyAq%0D%0AKSkp%0D%0A" class="RktValLink" pltdoc="x">*</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">100</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBy%0D%0AYW5kb20pKSk%3D%0D%0A" class="RktValLink" pltdoc="x">random</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgZm9yKSkp%0D%0A" class="RktStxLink" pltdoc="x">for</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">workunit</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9wcml2YXRl%0D%0AL2Jhc2Uucmt0IikgYyBpbi1saXN0KSkp%0D%0A" class="RktValLink" pltdoc="x">in-list</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">running-workunits</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9wcml2YXRl%0D%0AL21pc2Mucmt0IikgYyBkaXNwbGF5bG4pKSk%3D%0D%0A" class="RktValLink" pltdoc="x">displayln</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/#(def._((planet._main..rkt._(gcr._riot..plt._1._0))._wait-until-done))" class="RktValLink" pltdoc="x">wait-until-done</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">workunit</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgbW9kdWxlKykpKQ%3D%3D%0D%0A" class="RktStxLink" pltdoc="x">module+</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">main</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/#(def._((planet._main..rkt._(gcr._riot..plt._1._0))._connect-to-riot-server!))" class="RktValLink" pltdoc="x">connect-to-riot-server!</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"localhost"</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">run</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></div><div class="SIntrapara"><table cellspacing="0"><tr><td><p><span class="stt"><span class="stt">Workunit #0: Master chose 67.0, but we choose 27.0.</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">Workunit #1: Master chose 67.0, but we choose 51.0.</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">Workunit #2: Master chose 67.0, but we choose 49.0.</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">Workunit #3: Master chose 67.0, but we choose 64.0.</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">Workunit #4: Master chose 67.0, but we choose 62.0.</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">Workunit #5: Master chose 67.0, but we choose 41.0.</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">Workunit #6: Master chose 67.0, but we choose 5.0.</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">Workunit #7: Master chose 67.0, but we choose 54.0.</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">Workunit #8: Master chose 67.0, but we choose 100.0.</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">Workunit #9: Master chose 67.0, but we choose 33.0.</span></span></p></td></tr></table></div><div class="SIntrapara">In this example, the free variable <span class="RktSym">master-random-number</span>&rsquo;s value of
67.0 has been serialized along with the <span class="RktSym"><a href="/#(form._((planet._main..rkt._(gcr._riot..plt._1._0))._do-work))" class="RktStxLink" pltdoc="x">do-work</a></span> body and sent to the
workers.</div></p><p>To ensure that workers use the same version of the code that the master thinks
they&rsquo;re using, <span class="RktSym"><a href="/#(form._((planet._main..rkt._(gcr._riot..plt._1._0))._do-work))" class="RktStxLink" pltdoc="x">do-work</a></span> signs the code with an md5 hash of the
<span class="RktSym">body</span><span class="stt"> </span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9zdHhjYXNlLXNjaGVtZS5ya3QiKSBjIC4uLikpKQ%3D%3D%0D%0A" class="RktStxLink" pltdoc="x">...</a></span> expressions. If a worker&rsquo;s hash of a <span class="RktSym"><a href="/#(form._((planet._main..rkt._(gcr._riot..plt._1._0))._do-work))" class="RktStxLink" pltdoc="x">do-work</a></span> body
does not match the master&rsquo;s hash, the worker will complain. Always keep all
worker code up to date.</p><h4>3.5<tt>&nbsp;</tt><a name="(part._problems)"></a>In which, with a heavy heart, we outline restrictions and limitations of for/work and do-work</h4><p>The <span class="RktSym"><a href="/#(form._((planet._main..rkt._(gcr._riot..plt._1._0))._for/work))" class="RktStxLink" pltdoc="x">for/work</a></span> and <span class="RktSym"><a href="/#(form._((planet._main..rkt._(gcr._riot..plt._1._0))._do-work))" class="RktStxLink" pltdoc="x">do-work</a></span> forms don&rsquo;t transmit their code;
they only transmit the free variables that the bodies refer to. This creates a
number of constraints:</p><ul><li><p><span class="RktSym"><a href="/#(form._((planet._main..rkt._(gcr._riot..plt._1._0))._for/work))" class="RktStxLink" pltdoc="x">for/work</a></span> and <span class="RktSym"><a href="/#(form._((planet._main..rkt._(gcr._riot..plt._1._0))._do-work))" class="RktStxLink" pltdoc="x">do-work</a></span> must be inside a module and this
module must be manually copied to each worker. These forms won&rsquo;t work from the REPL.</p></li><li><p><span class="RktSym"><a href="/#(form._((planet._main..rkt._(gcr._riot..plt._1._0))._for/work))" class="RktStxLink" pltdoc="x">for/work</a></span> and <span class="RktSym"><a href="/#(form._((planet._main..rkt._(gcr._riot..plt._1._0))._do-work))" class="RktStxLink" pltdoc="x">do-work</a></span> do not currently work within
submodules.</p></li><li><p>As mentioned earlier, all free variables that the body refers to must be
serializable. This means using serialize-struct instead of normal structs and
taking care to ensure that all required libraries do the same.</p></li><li><p>Be careful about referring to large variables. Top-level variables are
OK, but if you dynamically generate a large variable in a function (say, our
dictionary) outside of the workunit, the network overhead of transferring
the entire dictionary will dwarf the computation time of the workunit.</p><p>In other words, this is perfectly fine because <span class="RktSym">dictionary</span> is in the
top-level:</p><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktCmt">;;</span><span class="hspace">&nbsp;</span><span class="RktCmt">Acceptable!</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgZGVmaW5lKSkp%0D%0A" class="RktStxLink" pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">dictionary</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9zZXQucmt0%0D%0AIikgYyBsaXN0LT5zZXQpKSk%3D%0D%0A" class="RktValLink" pltdoc="x">list-&gt;set</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9maWxlLnJr%0D%0AdCIpIGMgZmlsZS0%2BbGluZXMpKSk%3D%0D%0A" class="RktValLink" pltdoc="x">file-&gt;lines</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"/usr/share/dict/words"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgZGVmaW5lKSkp%0D%0A" class="RktStxLink" pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">word-combinations</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/#(form._((planet._main..rkt._(gcr._riot..plt._1._0))._for/work))" class="RktStxLink" pltdoc="x">for/work</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">word</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9zZXQucmt0%0D%0AIikgYyBpbi1zZXQpKSk%3D%0D%0A" class="RktValLink" pltdoc="x">in-set</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">dictionary</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9zdHhjYXNlLXNjaGVtZS5ya3QiKSBjIC4uLikpKQ%3D%3D%0D%0A" class="RktStxLink" pltdoc="x">...</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">word</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9zdHhjYXNlLXNjaGVtZS5ya3QiKSBjIC4uLikpKQ%3D%3D%0D%0A" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote><p>Each worker will load the dictionary once when the file is required and use
that copy for each workunit.</p><p><div class="SIntrapara">This, however, will send an entire copy of the dictionary along with each and
every workunit:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktCmt">;;</span><span class="hspace">&nbsp;</span><span class="RktCmt">Inefficient!</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgZGVmaW5lKSkp%0D%0A" class="RktStxLink" pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">word-combinations</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgZGVmaW5lKSkp%0D%0A" class="RktStxLink" pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">dictionary</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9zZXQucmt0%0D%0AIikgYyBsaXN0LT5zZXQpKSk%3D%0D%0A" class="RktValLink" pltdoc="x">list-&gt;set</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9maWxlLnJr%0D%0AdCIpIGMgZmlsZS0%2BbGluZXMpKSk%3D%0D%0A" class="RktValLink" pltdoc="x">file-&gt;lines</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"/usr/share/dict/words"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/#(form._((planet._main..rkt._(gcr._riot..plt._1._0))._for/work))" class="RktStxLink" pltdoc="x">for/work</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">word</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9zZXQucmt0%0D%0AIikgYyBpbi1zZXQpKSk%3D%0D%0A" class="RktValLink" pltdoc="x">in-set</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">dictionary</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9zdHhjYXNlLXNjaGVtZS5ya3QiKSBjIC4uLikpKQ%3D%3D%0D%0A" class="RktStxLink" pltdoc="x">...</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">word</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9zdHhjYXNlLXNjaGVtZS5ya3QiKSBjIC4uLikpKQ%3D%3D%0D%0A" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></div></p></li><li><p>When workers attempt to execute a workunit created by a <span class="RktSym"><a href="/#(form._((planet._main..rkt._(gcr._riot..plt._1._0))._do-work))" class="RktStxLink" pltdoc="x">do-work</a></span>
or <span class="RktSym"><a href="/#(form._((planet._main..rkt._(gcr._riot..plt._1._0))._for/work))" class="RktStxLink" pltdoc="x">for/work</a></span> form, they <span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgcmVxdWlyZSkpKQ%3D%3D%0D%0A" class="RktStxLink" pltdoc="x">require</a></span> the module and search for the code
to be executed. Be sure that workers won&rsquo;t execute either of these forms when
the module is <span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgcmVxdWlyZSkpKQ%3D%3D%0D%0A" class="RktStxLink" pltdoc="x">require</a></span>d, or else your workers will try to create
workunits of their own!</p></li></ul><h4>3.6<tt>&nbsp;</tt><a name="(part._.In_which_we_describe_the_numerous_kinds_of_workunits_and_how_to_create_them)"></a>In which we describe the numerous kinds of workunits and how to create them</h4><p>There&rsquo;s more to riot than <span class="RktSym"><a href="/#(form._((planet._main..rkt._(gcr._riot..plt._1._0))._for/work))" class="RktStxLink" pltdoc="x">for/work</a></span> and <span class="RktSym"><a href="/#(form._((planet._main..rkt._(gcr._riot..plt._1._0))._do-work))" class="RktStxLink" pltdoc="x">do-work</a></span>. If those
functions seem too magical, you may be more comfortable with these instead.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((planet._main..rkt._(gcr._riot..plt._1._0))._do-work/call))"></a><span title="Provided from: (planet gcr/riot:1:=0)"><span class="RktSym"><a href="/#(def._((planet._main..rkt._(gcr._riot..plt._1._0))._do-work/call))" class="RktValLink" pltdoc="x">do-work/call</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">module</span><span class="hspace">&nbsp;</span><span class="RktVar">exported-fun</span><span class="hspace">&nbsp;</span><span class="RktVar">arg</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9jb250cmFj%0D%0AdC9wcml2YXRlL21pc2Mucmt0IikgYyBhbnkvYykpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">any/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">module</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBt%0D%0Ab2R1bGUtcGF0aD8pKSk%3D%0D%0A" class="RktValLink" pltdoc="x">module-path?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">exported-fun</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBz%0D%0AeW1ib2w%2FKSkp%0D%0A" class="RktValLink" pltdoc="x">symbol?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">arg</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9wcml2YXRl%0D%0AL3NlcmlhbGl6ZS5ya3QiKSBjIHNlcmlhbGl6YWJsZT8pKSk%3D%0D%0A" class="RktValLink" pltdoc="x">serializable?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Accepts a module path and an exported symbol in that module. Workers will
require <span class="RktVar">module</span> and run <span class="RktPn">(</span><span class="RktVar">exported-fun</span><span class="stt"> </span><span class="RktVar">arg</span><span class="stt"> </span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9zdHhjYXNlLXNjaGVtZS5ya3QiKSBjIC4uLikpKQ%3D%3D%0D%0A" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span>.
Be sure that workers have the latest version of the module, or you may get
incorrect results &ndash; this function does not sign the module&rsquo;s code or perform
any version checking.</div></p><p>Returns instantly (after one round-trip to the tracker) and returns a workunit
ID, a string representing a promise to do the work. Pass this value to
<span class="RktSym"><a href="/#(def._((planet._main..rkt._(gcr._riot..plt._1._0))._wait-until-done))" class="RktValLink" pltdoc="x">wait-until-done</a></span> to return the value of the called function.</p><p>Example:</p><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktMeta">#lang</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgbW9kLXBhdGggYyAicmFja2V0Iikp%0D%0A" class="RktModLink" pltdoc="x"><span class="RktSym">racket</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktCmt">;;</span><span class="hspace">&nbsp;</span><span class="RktCmt">This</span><span class="hspace">&nbsp;</span><span class="RktCmt">is</span><span class="hspace">&nbsp;</span><span class="RktCmt">do-work-call.rkt</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgcmVxdWlyZSkpKQ%3D%3D%0D%0A" class="RktStxLink" pltdoc="x">require</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgcGxhbmV0KSkp%0D%0A" class="RktStxLink" pltdoc="x">planet</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">gcr/riot</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgcHJvdmlkZSkpKQ%3D%3D%0D%0A" class="RktStxLink" pltdoc="x">provide</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">double</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgZGVmaW5lKSkp%0D%0A" class="RktStxLink" pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">double</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyAq%0D%0AKSkp%0D%0A" class="RktValLink" pltdoc="x">*</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">x</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgZGVmaW5lKSkp%0D%0A" class="RktStxLink" pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">run</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgZGVmaW5lKSkp%0D%0A" class="RktStxLink" pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">running-workunits</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgZm9yL2xpc3QpKSk%3D%0D%0A" class="RktStxLink" pltdoc="x">for/list</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">x</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9wcml2YXRl%0D%0AL2Jhc2Uucmt0IikgYyBpbi1yYW5nZSkpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">in-range</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">10</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/#(def._((planet._main..rkt._(gcr._riot..plt._1._0))._do-work/call))" class="RktValLink" pltdoc="x">do-work/call</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"do-work-call.rkt"</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIHF1b3RlIGMgIyVrZXJuZWwpIGMg%0D%0AcXVvdGUpKSk%3D%0D%0A" class="RktStxLink" pltdoc="x">'</a></span><span class="RktSym">double</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9wcml2YXRl%0D%0AL21hcC5ya3QiKSBjIG1hcCkpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">map</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="/#(def._((planet._main..rkt._(gcr._riot..plt._1._0))._wait-until-done))" class="RktValLink" pltdoc="x">wait-until-done</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">running-workunits</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgbW9kdWxlKykpKQ%3D%3D%0D%0A" class="RktStxLink" pltdoc="x">module+</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">main</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/#(def._((planet._main..rkt._(gcr._riot..plt._1._0))._connect-to-riot-server!))" class="RktValLink" pltdoc="x">connect-to-riot-server!</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"localhost"</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">run</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></div><div class="SIntrapara">This produces <span class="RktRes">'(0<span class="stt"> </span>2<span class="stt"> </span>4<span class="stt"> </span>6<span class="stt"> </span>8<span class="stt"> </span>10<span class="stt"> </span>12<span class="stt"> </span>14<span class="stt"> </span>16<span class="stt"> </span>18)</span></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((planet._main..rkt._(gcr._riot..plt._1._0))._do-work/eval))"></a><span title="Provided from: (planet gcr/riot:1:=0)"><span class="RktSym"><a href="/#(def._((planet._main..rkt._(gcr._riot..plt._1._0))._do-work/eval))" class="RktValLink" pltdoc="x">do-work/eval</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">datum</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9jb250cmFj%0D%0AdC9wcml2YXRlL21pc2Mucmt0IikgYyBhbnkvYykpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">any/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">datum</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9jb250cmFj%0D%0AdC9wcml2YXRlL21pc2Mucmt0IikgYyBhbnkvYykpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Creates a workunit that causes workers to <span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBl%0D%0AdmFsKSkp%0D%0A" class="RktValLink" pltdoc="x">eval</a></span><span class="stt"> </span><span class="RktVar">datum</span><span class="RktPn">)</span>, with all the
nightmarish implications that entails.</div></p><p>Returns instantly (after one round-trip to the tracker) and returns a workunit
ID, a string representing a promise to do the work. Pass this value to
<span class="RktSym"><a href="/#(def._((planet._main..rkt._(gcr._riot..plt._1._0))._wait-until-done))" class="RktValLink" pltdoc="x">wait-until-done</a></span> to return the evaluated value of <span class="RktVar">datum</span>.</p><p>This is the only function that does not require workers to share any code with
the master.</p><p>Example:</p><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktMeta">#lang</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgbW9kLXBhdGggYyAicmFja2V0Iikp%0D%0A" class="RktModLink" pltdoc="x"><span class="RktSym">racket</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgcmVxdWlyZSkpKQ%3D%3D%0D%0A" class="RktStxLink" pltdoc="x">require</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgcGxhbmV0KSkp%0D%0A" class="RktStxLink" pltdoc="x">planet</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">gcr/riot</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/#(def._((planet._main..rkt._(gcr._riot..plt._1._0))._connect-to-riot-server!))" class="RktValLink" pltdoc="x">connect-to-riot-server!</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"localhost"</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/#(def._((planet._main..rkt._(gcr._riot..plt._1._0))._wait-until-done))" class="RktValLink" pltdoc="x">wait-until-done</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="/#(def._((planet._main..rkt._(gcr._riot..plt._1._0))._do-work/eval))" class="RktValLink" pltdoc="x">do-work/eval</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIHF1b3RlIGMgIyVrZXJuZWwpIGMg%0D%0AcXVvdGUpKSk%3D%0D%0A" class="RktStxLink" pltdoc="x">'</a></span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyAr%0D%0AKSkp%0D%0A" class="RktValLink" pltdoc="x">+</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">3</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">5</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></div><div class="SIntrapara">produces <span class="RktRes">8</span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((planet._main..rkt._(gcr._riot..plt._1._0))._wait-until-done))"></a><span title="Provided from: (planet gcr/riot:1:=0)"><span class="RktSym"><a href="/#(def._((planet._main..rkt._(gcr._riot..plt._1._0))._wait-until-done))" class="RktValLink" pltdoc="x">wait-until-done</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">workunit-id</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9jb250cmFj%0D%0AdC9wcml2YXRlL21pc2Mucmt0IikgYyBhbnkvYykpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">any/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">workunit-id</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9jb250cmFj%0D%0AdC9wcml2YXRlL21pc2Mucmt0IikgYyBhbnkvYykpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Waits until the given <span class="RktVar">workunit-id</span> is finished, and returns the result.
If a worker throws an exception while running the workunit , this function
will throw an exception in the master program.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((planet._main..rkt._(gcr._riot..plt._1._0))._call-when-done))"></a><span title="Provided from: (planet gcr/riot:1:=0)"><span class="RktSym"><a href="/#(def._((planet._main..rkt._(gcr._riot..plt._1._0))._call-when-done))" class="RktValLink" pltdoc="x">call-when-done</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">workunit-id</span><span class="hspace">&nbsp;</span><span class="RktVar">thunk</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9jb250cmFj%0D%0AdC9wcml2YXRlL21pc2Mucmt0IikgYyBhbnkvYykpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">any/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">workunit-id</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9jb250cmFj%0D%0AdC9wcml2YXRlL21pc2Mucmt0IikgYyBhbnkvYykpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">any/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">thunk</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvY29udHJh%0D%0AY3QvYmFzZS5ya3QiKSBjIC0%2BKSkp%0D%0A" class="RktStxLink" pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBi%0D%0Ab29sZWFuPykpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">boolean?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9jb250cmFj%0D%0AdC9wcml2YXRlL21pc2Mucmt0IikgYyBhbnkvYykpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9jb250cmFj%0D%0AdC9wcml2YXRlL21pc2Mucmt0IikgYyBhbnkvYykpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9jb250cmFj%0D%0AdC9wcml2YXRlL21pc2Mucmt0IikgYyBhbnkvYykpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">any/c</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Returns instantly, but sets up <span class="RktVar">thunk</span> to be called in its own thread
once the given <span class="RktVar">workunit-id</span> finishes.</div></p><p>Riot will call <span class="RktPn">(</span><span class="RktVar">thunk</span><span class="stt"> </span><span class="RktSym">error?</span><span class="stt"> </span><span class="RktSym">client-name</span><span class="stt"> </span><span class="RktSym">result</span><span class="RktPn">)</span>. If the workunit
succeeds, <span class="RktSym">error?</span> is <span class="RktVal">#f</span>, <span class="RktSym">client-name</span> is the ID of
the client that finished the workunit, and <span class="RktSym">result</span> is the result of the
workunit. If the workunit fails, <span class="RktSym">error?</span> is <span class="RktVal">#t</span> and
<span class="RktSym">result</span> is the message of the exception that caused the workunit to fail.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(def._((planet._main..rkt._(gcr._riot..plt._1._0))._connect-to-riot-server!))"></a><span title="Provided from: (planet gcr/riot:1:=0)"><span class="RktSym"><a href="/#(def._((planet._main..rkt._(gcr._riot..plt._1._0))._connect-to-riot-server!))" class="RktValLink" pltdoc="x">connect-to-riot-server!</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">hostname</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span>[</td><td><span class="RktVar">port</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">client-name</span>]<span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9jb250cmFj%0D%0AdC9wcml2YXRlL21pc2Mucmt0IikgYyBhbnkvYykpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">any/c</a></span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">hostname</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBz%0D%0AdHJpbmc%2FKSkp%0D%0A" class="RktValLink" pltdoc="x">string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">port</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBl%0D%0AeGFjdC1pbnRlZ2VyPykpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">exact-integer?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">2355</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">client-name</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBl%0D%0AeGFjdC1pbnRlZ2VyPykpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">exact-integer?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgIm16bGliL29zLnJrdCIp%0D%0AIGMgZ2V0aG9zdG5hbWUpKSk%3D%0D%0A" class="RktValLink" pltdoc="x">gethostname</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Connects to the tracker server at <span class="RktVar">hostname</span> and returns nothing. This function also sets <span class="RktSym"><a href="/#(def._((planet._main..rkt._(gcr._riot..plt._1._0))._current-client))" class="RktValLink" pltdoc="x">current-client</a></span> to the
resulting <span class="RktSym"><a href="/#(def._((planet._client..rkt._(gcr._riot..plt._1._0))._client~3f))" class="RktValLink" pltdoc="x">client?</a></span> object.
</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((planet._main..rkt._(gcr._riot..plt._1._0))._current-client))"></a><span title="Provided from: (planet gcr/riot:1:=0)"><span class="RktSym"><a href="/#(def._((planet._main..rkt._(gcr._riot..plt._1._0))._current-client))" class="RktValLink" pltdoc="x">current-client</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="/#(def._((planet._client..rkt._(gcr._riot..plt._1._0))._client~3f))" class="RktValLink" pltdoc="x">client?</a></span></td></tr><tr><td><span class="RktPn">(</span><span title="Provided from: (planet gcr/riot:1:=0)"><span class="RktSym"><a href="/#(def._((planet._main..rkt._(gcr._riot..plt._1._0))._current-client))" class="RktValLink" pltdoc="x">current-client</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">client-obj</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyB2%0D%0Ab2lkPykpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">client-obj</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="/#(def._((planet._client..rkt._(gcr._riot..plt._1._0))._client~3f))" class="RktValLink" pltdoc="x">client?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">The parameter that represents the currently connected tracker. Used internally
by the above functions</div></p><h3>4<tt>&nbsp;</tt><a name="(part._lowlevel)"></a><a name="(mod-path._(planet._gcr/riot~3a1~3a~3d0/client))"></a>In which we present a lower-level client API for communicating with the tracker</h3><p><div class="SIntrapara"><table cellspacing="0" class="defmodule"><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgcmVxdWlyZSkpKQ%3D%3D%0D%0A" class="RktStxLink" pltdoc="x">require</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvcHJpdmF0%0D%0AZS9iYXNlLnJrdCIpIGMgcGxhbmV0KSkp%0D%0A" class="RktStxLink" pltdoc="x">planet</a></span><span class="stt"> </span><span class="RktSym">gcr/riot:1:=0/client</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara">This module contains lower-level bindings for communicating with the tracker.
Both the master prgoram and workers use it.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((planet._client..rkt._(gcr._riot..plt._1._0))._client~3f))"></a><span title="Provided from: (planet gcr/riot:1:=0/client)"><span class="RktSym"><a href="/#(def._((planet._client..rkt._(gcr._riot..plt._1._0))._client~3f))" class="RktValLink" pltdoc="x">client?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">maybe-client</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBi%0D%0Ab29sZWFuPykpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">boolean?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">maybe-client</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9jb250cmFj%0D%0AdC9wcml2YXRlL21pc2Mucmt0IikgYyBhbnkvYykpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns <span class="RktVal">#t</span> if <span class="RktVar">maybe-client</span> is the result of
<span class="RktSym"><a href="/#(def._((planet._client..rkt._(gcr._riot..plt._1._0))._connect-to-tracker))" class="RktValLink" pltdoc="x">connect-to-tracker</a></span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(def._((planet._client..rkt._(gcr._riot..plt._1._0))._connect-to-tracker))"></a><span title="Provided from: (planet gcr/riot:1:=0/client)"><span class="RktSym"><a href="/#(def._((planet._client..rkt._(gcr._riot..plt._1._0))._connect-to-tracker))" class="RktValLink" pltdoc="x">connect-to-tracker</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">hostname</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span>[</td><td><span class="RktVar">port</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">client-name</span>]<span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="/#(def._((planet._client..rkt._(gcr._riot..plt._1._0))._client~3f))" class="RktValLink" pltdoc="x">client?</a></span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">hostname</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBz%0D%0AdHJpbmc%2FKSkp%0D%0A" class="RktValLink" pltdoc="x">string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">port</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBl%0D%0AeGFjdC1pbnRlZ2VyPykpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">exact-integer?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">2355</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">client-name</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBl%0D%0AeGFjdC1pbnRlZ2VyPykpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">exact-integer?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgIm16bGliL29zLnJrdCIp%0D%0AIGMgZ2V0aG9zdG5hbWUpKSk%3D%0D%0A" class="RktValLink" pltdoc="x">gethostname</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Connects to the tracker server at <span class="RktVar">hostname</span>, reports a client ID of
<span class="RktVar">client-name</span>, and returns a <span class="RktSym"><a href="/#(def._((planet._client..rkt._(gcr._riot..plt._1._0))._client~3f))" class="RktValLink" pltdoc="x">client?</a></span> upon successful
connection.
</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((planet._client..rkt._(gcr._riot..plt._1._0))._client-who-am-i))"></a><span title="Provided from: (planet gcr/riot:1:=0/client)"><span class="RktSym"><a href="/#(def._((planet._client..rkt._(gcr._riot..plt._1._0))._client-who-am-i))" class="RktValLink" pltdoc="x">client-who-am-i</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">client</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9jb250cmFj%0D%0AdC9wcml2YXRlL21pc2Mucmt0IikgYyBhbnkvYykpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">any/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">client</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="/#(def._((planet._client..rkt._(gcr._riot..plt._1._0))._client~3f))" class="RktValLink" pltdoc="x">client?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">The server will append a nonce to your client ID. Call this function to return
your full client ID as chosen by the server.
</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((planet._client..rkt._(gcr._riot..plt._1._0))._client-workunit-info))"></a><span title="Provided from: (planet gcr/riot:1:=0/client)"><span class="RktSym"><a href="/#(def._((planet._client..rkt._(gcr._riot..plt._1._0))._client-workunit-info))" class="RktValLink" pltdoc="x">client-workunit-info</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">client</span><span class="hspace">&nbsp;</span><span class="RktVar">workunit-id</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9jb250cmFj%0D%0AdC9wcml2YXRlL21pc2Mucmt0IikgYyBsaXN0L2MpKSk%3D%0D%0A" class="RktValLink" pltdoc="x">list/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBz%0D%0AeW1ib2w%2FKSkp%0D%0A" class="RktValLink" pltdoc="x">symbol?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9jb250cmFj%0D%0AdC9wcml2YXRlL21pc2Mucmt0IikgYyBhbnkvYykpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9jb250cmFj%0D%0AdC9wcml2YXRlL21pc2Mucmt0IikgYyBhbnkvYykpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9jb250cmFj%0D%0AdC9wcml2YXRlL21pc2Mucmt0IikgYyBhbnkvYykpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">any/c</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">client</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="/#(def._((planet._client..rkt._(gcr._riot..plt._1._0))._client~3f))" class="RktValLink" pltdoc="x">client?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">workunit-id</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9jb250cmFj%0D%0AdC9wcml2YXRlL21pc2Mucmt0IikgYyBhbnkvYykpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns information about the given <span class="RktVar">workunit-id</span>:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBs%0D%0AaXN0KSkp%0D%0A" class="RktValLink" pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktSym">status</span><span class="hspace">&nbsp;</span><span class="RktSym">wu-client</span><span class="hspace">&nbsp;</span><span class="RktSym">result</span><span class="hspace">&nbsp;</span><span class="RktSym">last-change</span><span class="RktPn">)</span></p></blockquote></div><div class="SIntrapara">where <span class="RktSym">status</span> is one of <span class="RktVal">'</span><span class="RktVal">waiting</span>, <span class="RktVal">'</span><span class="RktVal">running</span>,
<span class="RktVal">'</span><span class="RktVal">done</span>, or <span class="RktVal">'</span><span class="RktVal">error</span>; <span class="RktSym">wu-client</span> is the client ID of the
worker processing the workunit (or <span class="RktVal">#f</span>); <span class="RktSym">result</span> is the value
of the workunit if completed or the error message if broken; and
<span class="RktSym">last-change</span> is the server&rsquo;s <span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBj%0D%0AdXJyZW50LWluZXhhY3QtbWlsbGlzZWNvbmRzKSkp%0D%0A" class="RktValLink" pltdoc="x">current-inexact-milliseconds</a></span><span class="RktPn">)</span>
when the workunit&rsquo;s status last changed.
</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(def._((planet._client..rkt._(gcr._riot..plt._1._0))._client-call-with-workunit-info))"></a><span title="Provided from: (planet gcr/riot:1:=0/client)"><span class="RktSym"><a href="/#(def._((planet._client..rkt._(gcr._riot..plt._1._0))._client-call-with-workunit-info))" class="RktValLink" pltdoc="x">client-call-with-workunit-info</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">client</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">workunit-id</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">thunk</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9jb250cmFj%0D%0AdC9wcml2YXRlL21pc2Mucmt0IikgYyBhbnkvYykpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">any/c</a></span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">client</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="/#(def._((planet._client..rkt._(gcr._riot..plt._1._0))._client~3f))" class="RktValLink" pltdoc="x">client?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">workunit-id</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9jb250cmFj%0D%0AdC9wcml2YXRlL21pc2Mucmt0IikgYyBhbnkvYykpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">any/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">thunk</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvY29udHJh%0D%0AY3QvYmFzZS5ya3QiKSBjIC0%2BKSkp%0D%0A" class="RktStxLink" pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBz%0D%0AeW1ib2w%2FKSkp%0D%0A" class="RktValLink" pltdoc="x">symbol?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9jb250cmFj%0D%0AdC9wcml2YXRlL21pc2Mucmt0IikgYyBhbnkvYykpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9jb250cmFj%0D%0AdC9wcml2YXRlL21pc2Mucmt0IikgYyBhbnkvYykpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9jb250cmFj%0D%0AdC9wcml2YXRlL21pc2Mucmt0IikgYyBhbnkvYykpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9jb250cmFj%0D%0AdC9wcml2YXRlL21pc2Mucmt0IikgYyBhbnkvYykpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">any/c</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Like above, but immediately returns. Later, <span class="RktVar">thunk</span> will be called in its own
thread with each of the arguments in the above list</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((planet._client..rkt._(gcr._riot..plt._1._0))._client-wait-for-work))"></a><span title="Provided from: (planet gcr/riot:1:=0/client)"><span class="RktSym"><a href="/#(def._((planet._client..rkt._(gcr._riot..plt._1._0))._client-wait-for-work))" class="RktValLink" pltdoc="x">client-wait-for-work</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">client</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9jb250cmFj%0D%0AdC9wcml2YXRlL21pc2Mucmt0IikgYyBsaXN0L2MpKSk%3D%0D%0A" class="RktValLink" pltdoc="x">list/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym">wu-key?</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9jb250cmFj%0D%0AdC9wcml2YXRlL21pc2Mucmt0IikgYyBhbnkvYykpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">any/c</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">client</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="/#(def._((planet._client..rkt._(gcr._riot..plt._1._0))._client~3f))" class="RktValLink" pltdoc="x">client?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Signals that you&rsquo;re waiting for work and blocks until the tracker assigns you a
workunit. The result is <span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBs%0D%0AaXN0KSkp%0D%0A" class="RktValLink" pltdoc="x">list</a></span><span class="stt"> </span><span class="RktSym">workunit-key</span><span class="stt"> </span><span class="RktSym">workunit-data</span><span class="RktPn">)</span>.</div></p><p><div class="SIntrapara">After this function returns, you will own that workunit; it will not be
assigned to other clients until you disconnect from the tracker or until you
call <span class="RktSym"><a href="/#(def._((planet._client..rkt._(gcr._riot..plt._1._0))._client-complete-workunit!))" class="RktValLink" pltdoc="x">client-complete-workunit!</a></span>.
</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((planet._client..rkt._(gcr._riot..plt._1._0))._client-call-with-work))"></a><span title="Provided from: (planet gcr/riot:1:=0/client)"><span class="RktSym"><a href="/#(def._((planet._client..rkt._(gcr._riot..plt._1._0))._client-call-with-work))" class="RktValLink" pltdoc="x">client-call-with-work</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">client</span><span class="hspace">&nbsp;</span><span class="RktVar">thunk</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9jb250cmFj%0D%0AdC9wcml2YXRlL21pc2Mucmt0IikgYyBhbnkvYykpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">any/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">client</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="/#(def._((planet._client..rkt._(gcr._riot..plt._1._0))._client~3f))" class="RktValLink" pltdoc="x">client?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">thunk</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvY29udHJh%0D%0AY3QvYmFzZS5ya3QiKSBjIC0%2BKSkp%0D%0A" class="RktStxLink" pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym">wu-key?</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9jb250cmFj%0D%0AdC9wcml2YXRlL21pc2Mucmt0IikgYyBhbnkvYykpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9jb250cmFj%0D%0AdC9wcml2YXRlL21pc2Mucmt0IikgYyBhbnkvYykpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">any/c</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Like above, but returns instantly. Later, <span class="RktVar">thunk</span> will be called in its own
thread when the tracker assigns a workunit to us, with arguments <span class="RktSym">workunit-key</span>
and <span class="RktSym">data</span>..
Its return value is NOT used as the workunit&rsquo;s result; you must call <span class="RktSym"><a href="/#(def._((planet._client..rkt._(gcr._riot..plt._1._0))._client-complete-workunit!))" class="RktValLink" pltdoc="x">client-complete-workunit!</a></span>.
</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((planet._client..rkt._(gcr._riot..plt._1._0))._client-add-workunit))"></a><span title="Provided from: (planet gcr/riot:1:=0/client)"><span class="RktSym"><a href="/#(def._((planet._client..rkt._(gcr._riot..plt._1._0))._client-add-workunit))" class="RktValLink" pltdoc="x">client-add-workunit</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">client</span><span class="hspace">&nbsp;</span><span class="RktVar">data</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9jb250cmFj%0D%0AdC9wcml2YXRlL21pc2Mucmt0IikgYyBhbnkvYykpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">any/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">client</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="/#(def._((planet._client..rkt._(gcr._riot..plt._1._0))._client~3f))" class="RktValLink" pltdoc="x">client?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">data</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9wcml2YXRl%0D%0AL3NlcmlhbGl6ZS5ya3QiKSBjIHNlcmlhbGl6YWJsZT8pKSk%3D%0D%0A" class="RktValLink" pltdoc="x">serializable?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Adds a workunit with the given <span class="RktVar">data</span> and blocks until the tracker
returns the new workunit&rsquo;s key.</div></p><p><div class="SIntrapara">Note that <span class="RktVar">data</span> must be in a special format; you should rarely need to
call this function. Look at the source code for <span class="stt">worker.rkt</span> to see how
workers parse this.
</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(def._((planet._client..rkt._(gcr._riot..plt._1._0))._client-call-with-new-workunit))"></a><span title="Provided from: (planet gcr/riot:1:=0/client)"><span class="RktSym"><a href="/#(def._((planet._client..rkt._(gcr._riot..plt._1._0))._client-call-with-new-workunit))" class="RktValLink" pltdoc="x">client-call-with-new-workunit</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">client</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">data</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">thunk</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9jb250cmFj%0D%0AdC9wcml2YXRlL21pc2Mucmt0IikgYyBhbnkvYykpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">any/c</a></span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">client</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="/#(def._((planet._client..rkt._(gcr._riot..plt._1._0))._client~3f))" class="RktValLink" pltdoc="x">client?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">data</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9wcml2YXRl%0D%0AL3NlcmlhbGl6ZS5ya3QiKSBjIHNlcmlhbGl6YWJsZT8pKSk%3D%0D%0A" class="RktValLink" pltdoc="x">serializable?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">thunk</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvY29udHJh%0D%0AY3QvYmFzZS5ya3QiKSBjIC0%2BKSkp%0D%0A" class="RktStxLink" pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9jb250cmFj%0D%0AdC9wcml2YXRlL21pc2Mucmt0IikgYyBhbnkvYykpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9jb250cmFj%0D%0AdC9wcml2YXRlL21pc2Mucmt0IikgYyBhbnkvYykpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">any/c</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Like above, but returns instantly, calling <span class="RktPn">(</span><span class="RktVar">thunk</span><span class="stt"> </span><span class="RktSym">new-workunit-key</span><span class="RktPn">)</span> in
its own thread when the tracker assigns us a workunit.
</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(def._((planet._client..rkt._(gcr._riot..plt._1._0))._client-wait-for-finished-workunit))"></a><span title="Provided from: (planet gcr/riot:1:=0/client)"><span class="RktSym"><a href="/#(def._((planet._client..rkt._(gcr._riot..plt._1._0))._client-wait-for-finished-workunit))" class="RktValLink" pltdoc="x">client-wait-for-finished-workunit</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">client</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">workunit</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9jb250cmFj%0D%0AdC9wcml2YXRlL21pc2Mucmt0IikgYyBsaXN0L2MpKSk%3D%0D%0A" class="RktValLink" pltdoc="x">list/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym">wu-key?</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBz%0D%0AeW1ib2w%2FKSkp%0D%0A" class="RktValLink" pltdoc="x">symbol?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9jb250cmFj%0D%0AdC9wcml2YXRlL21pc2Mucmt0IikgYyBhbnkvYykpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9jb250cmFj%0D%0AdC9wcml2YXRlL21pc2Mucmt0IikgYyBhbnkvYykpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">any/c</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">client</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="/#(def._((planet._client..rkt._(gcr._riot..plt._1._0))._client~3f))" class="RktValLink" pltdoc="x">client?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">workunit</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9jb250cmFj%0D%0AdC9wcml2YXRlL21pc2Mucmt0IikgYyBhbnkvYykpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Waits for the given <span class="RktVar">workunit</span> to complete, returning <span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBs%0D%0AaXN0KSkp%0D%0A" class="RktValLink" pltdoc="x">list</a></span><span class="stt"> </span><span class="RktSym">wu-key</span><span class="stt"> </span><span class="RktSym">status</span><span class="stt"> </span><span class="RktVar">client</span><span class="stt"> </span><span class="RktSym">result</span><span class="RktPn">)</span> as in <span class="RktSym"><a href="/#(def._((planet._client..rkt._(gcr._riot..plt._1._0))._client-workunit-info))" class="RktValLink" pltdoc="x">client-workunit-info</a></span>.
</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(def._((planet._client..rkt._(gcr._riot..plt._1._0))._client-call-with-finished-workunit))"></a><span title="Provided from: (planet gcr/riot:1:=0/client)"><span class="RktSym"><a href="/#(def._((planet._client..rkt._(gcr._riot..plt._1._0))._client-call-with-finished-workunit))" class="RktValLink" pltdoc="x">client-call-with-finished-workunit</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">client</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">workunit</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">thunk</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9jb250cmFj%0D%0AdC9wcml2YXRlL21pc2Mucmt0IikgYyBhbnkvYykpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">any/c</a></span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">client</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="/#(def._((planet._client..rkt._(gcr._riot..plt._1._0))._client~3f))" class="RktValLink" pltdoc="x">client?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">workunit</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9jb250cmFj%0D%0AdC9wcml2YXRlL21pc2Mucmt0IikgYyBhbnkvYykpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">any/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">thunk</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICJyYWNrZXQvY29udHJh%0D%0AY3QvYmFzZS5ya3QiKSBjIC0%2BKSkp%0D%0A" class="RktStxLink" pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym">wu-key?</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBz%0D%0AeW1ib2w%2FKSkp%0D%0A" class="RktValLink" pltdoc="x">symbol?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9jb250cmFj%0D%0AdC9wcml2YXRlL21pc2Mucmt0IikgYyBhbnkvYykpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9jb250cmFj%0D%0AdC9wcml2YXRlL21pc2Mucmt0IikgYyBhbnkvYykpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9jb250cmFj%0D%0AdC9wcml2YXRlL21pc2Mucmt0IikgYyBhbnkvYykpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">any/c</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Arranges for <span class="RktVar">thunk</span> to be called in its own thread when
<span class="RktVar">workunit</span> finishes, with args like the above list.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(def._((planet._client..rkt._(gcr._riot..plt._1._0))._client-complete-workunit!))"></a><span title="Provided from: (planet gcr/riot:1:=0/client)"><span class="RktSym"><a href="/#(def._((planet._client..rkt._(gcr._riot..plt._1._0))._client-complete-workunit!))" class="RktValLink" pltdoc="x">client-complete-workunit!</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">client</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">workunit</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">error?</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">result</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9jb250cmFj%0D%0AdC9wcml2YXRlL21pc2Mucmt0IikgYyBhbnkvYykpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">any/c</a></span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">client</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="/#(def._((planet._client..rkt._(gcr._riot..plt._1._0))._client~3f))" class="RktValLink" pltdoc="x">client?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">workunit</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9jb250cmFj%0D%0AdC9wcml2YXRlL21pc2Mucmt0IikgYyBhbnkvYykpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">any/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">error?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgcXVvdGUgYyAjJWtlcm5lbCkgYyBi%0D%0Ab29sZWFuPykpKQ%3D%3D%0D%0A" class="RktValLink" pltdoc="x">boolean?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">result</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="/servlets/doc-search.rkt?tag=KCgzKSAwICgpIDAgKCkgKCkgKGMgZGVmIGMgKGMgKGMgbGliIGMgInJhY2tldC9wcml2YXRl%0D%0AL3NlcmlhbGl6ZS5ya3QiKSBjIHNlcmlhbGl6YWJsZT8pKSk%3D%0D%0A" class="RktValLink" pltdoc="x">serializable?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Sends <span class="RktVar">result</span> to the tracker as the result of the <span class="RktVar">workunit</span>. If
the workunit fails, <span class="RktVar">error?</span> should be <span class="RktVal">#t</span> and <span class="RktVar">result</span>
should be a
message indicating what went wrong.</div></p><h3>5<tt>&nbsp;</tt><a name="(part._.In_which_we_outline_licensing_and_copyrights)"></a>In which we outline licensing and copyrights</h3><p>The code in this <span class="stt">(planet gcr/riot)</span> package and this documentation is
under the zlib license, reproduced below.</p><p><table cellspacing="0"><tr><td><p><span class="stt"><span class="stt">Copyright (c) 2012 gcr</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt"></span></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt"><span class="stt">This software is provided 'as-is', without any express or implied</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">warranty. In no event will the authors be held liable for any damages</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">arising from the use of this software.</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt"></span></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt"><span class="stt">Permission is granted to anyone to use this software for any purpose,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">including commercial applications, and to alter it and redistribute it</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">freely, subject to the following restrictions:</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt"></span></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">1. The origin of this software must not be misrepresented; you must not</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">claim that you wrote the original software. If you use this software</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in a product, an acknowledgment in the product documentation would be</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">appreciated but is not required.</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt"></span></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">2. Altered source versions must be plainly marked as such, and must not be</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">misrepresented as being the original software.</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt"></span></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">3. This notice may not be removed or altered from any source</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">distribution.</span></span></p></td></tr></table></p></div></div><div id="contextindicator">&nbsp;</div></body></html>